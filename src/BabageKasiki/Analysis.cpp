/*  Author : SUZEAU Fran√ßois

    Creation : 03/02/2022

    Purpose : Declaration of the Analysis class
*/

#include "Analysis.hpp"

/***********************************************************************************************************************************************************************/
/***************************************************************** Constructor and Destructor **************************************************************************/
/***********************************************************************************************************************************************************************/
Analysis::Analysis(std::string cyper_text) : m_cypher_text(cyper_text)
{

}

Analysis::~Analysis()
{

}

/***********************************************************************************************************************************************************************/
/************************************************************************* calculateOccurences *************************************************************************/
/***********************************************************************************************************************************************************************/
void Analysis::calculateOccurences()
{
    std::cout << this->findOccurrence("abc") << std::endl;
    std::cout << this->findOccurrence("bcd") << std::endl;
    std::cout << this->findOccurrence("abcd") << std::endl;
    std::cout << this->findOccurrence("mno") << std::endl;
}

/***********************************************************************************************************************************************************************/
/***************************************************************************** findOccurrence **************************************************************************/
/***********************************************************************************************************************************************************************/
unsigned int Analysis::findOccurrence(std::string sequence)
{
    std::cout << "Search for occurence : " << sequence << std::endl;

    std::string copy = m_cypher_text;
    std::string::size_type found_pos = copy.find(sequence);
    unsigned int count(0);

    while(found_pos != std::string::npos)
    {
        copy.erase(found_pos, sequence.size());

        found_pos = copy.find(sequence);

        count++;
    }

    return count;
}